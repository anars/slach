const pieces = {
    "bf": "m5.0001 1c-0.1877 0-0.36115 0.10249-0.45168 0.26693-0.073493 0.13348-0.082105 0.29099-0.029491 0.43051-0.32433 0.33394-0.62307 0.67237-0.73978 1.0438-0.062168 0.19782-0.068176 0.40891 0.01109 0.61375 0.047115 0.12174 0.12614 0.23928 0.23164 0.35388h-0.44135c-0.13686 0-0.26821 0.05446-0.36497 0.15123-0.096786 0.096772-0.15123 0.22812-0.15123 0.36497v0.25811c0 0.13686 0.054446 0.26821 0.15123 0.36497 0.096772 0.096772 0.22812 0.15123 0.36497 0.15123h0.38312c-0.041903 1.6667-0.87363 2.3593-1.4423 2.6474-0.22044 0.10841-0.36044 0.33332-0.36044 0.57897v0.25811c0 0.13686 0.054446 0.26821 0.15123 0.36497 0.096772 0.096772 0.22812 0.15123 0.36497 0.15123h4.6458c0.13686 0 0.26821-0.05446 0.36497-0.15123 0.096786-0.096772 0.15123-0.22812 0.15123-0.36497v-0.25811c0-0.24566-0.13999-0.47055-0.36044-0.57897-0.56862-0.28801-1.4003-0.98062-1.4423-2.6474h0.38312c0.13686 0 0.26821-0.05446 0.36497-0.15123 0.096788-0.096772 0.15123-0.22812 0.15123-0.36497v-0.25811c0-0.13686-0.054446-0.26821-0.15123-0.36497-0.096772-0.096772-0.22812-0.15123-0.36497-0.15123h-0.44135c0.1055-0.1146 0.18452-0.23214 0.23164-0.35388 0.079272-0.20484 0.073264-0.41593 0.011086-0.61375-0.11671-0.37141-0.41543-0.70981-0.73978-1.0438 0.052618-0.13951 0.044007-0.29703-0.029485-0.43051-0.090534-0.16443-0.26397-0.26693-0.45168-0.26693z",
    "kf": "m4.4839 1c-0.071485 0-0.12903 0.057549-0.12903 0.12903v0.64517h-0.64517c-0.071485 0-0.12903 0.057549-0.12903 0.12903v1.0323c0 0.071485 0.057549 0.12903 0.12903 0.12903h0.64517v0.64517h-0.7742c-0.13684 0-0.26816 0.054452-0.36493 0.15121-0.096769 0.096758-0.15121 0.22808-0.15121 0.36493v0.25806c0 0.13684 0.054443 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h0.38307c-0.041896 1.6665-0.8735 2.359-1.442 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054443 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096768-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56855-0.28797-1.4001-0.98048-1.442-2.6469h0.38307c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096768-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.13684-0.054443-0.26816-0.15121-0.36493-0.096758-0.096758-0.22808-0.15121-0.36493-0.15121h-0.7742v-0.64517h0.64517c0.071485 0 0.12903-0.057549 0.12903-0.12903v-1.0323c0-0.071485-0.057549-0.12903-0.12903-0.12903h-0.64517v-0.64517c0-0.071485-0.057549-0.12903-0.12903-0.12903z",
    "nf": "m4.871 1c-0.071485 0-0.12903 0.050354-0.12903 0.1129v0.66708c-0.69979 0.058272-1.2771 0.58578-1.3957 1.2833l-0.88684 0.55242c-0.19641 0.12324-0.29814 0.35207-0.29814 0.61014 0 0.14402 0.041294 0.28949 0.11971 0.41356 0.21074 0.33344 0.64111 0.45404 0.9942 0.2815l0.29612-0.13937c0.078299-0.032432 0.16421-0.064611 0.2674-0.00503 0.080024 0.046203 0.12903 0.13114 0.12903 0.22355-0.041898 1.6665-0.87754 2.359-1.4461 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054434 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096775-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56854-0.28797-1.4001-0.98047-1.442-2.6469h0.38307c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096775-0.096758 0.15121-0.22808 0.15121-0.36493v-1.4194c-4e-7 -0.5475-0.2177-1.0725-0.60485-1.4597-0.38714-0.38714-0.91219-0.60485-1.4597-0.60485z",
    "pf": "m5 1c-0.72713-2.556e-5 -1.3575 0.5071-1.5126 1.2167-0.1226 0.56075 0.078288 1.1293 0.49371 1.4929h-0.5295c-0.13684 0-0.26816 0.054452-0.36493 0.15121-0.096758 0.096758-0.15121 0.22808-0.15121 0.36493v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h0.5121c-0.041896 1.6665-0.8735 2.359-1.442 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096758-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56855-0.28797-1.4001-0.98048-1.442-2.6469h0.5121c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096758-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.13684-0.054452-0.26816-0.15121-0.36493-0.096758-0.096758-0.22808-0.15121-0.36493-0.15121h-0.5295c0.41542-0.36365 0.61629-0.9322 0.49371-1.4929-0.15515-0.70964-0.78549-1.2168-1.5126-1.2167z",
    "qf": "m4.9953 1.0001c-0.045178 0.00166-0.086192 0.026804-0.10811 0.066278l-0.5824 1.0468-1.0484-0.58164c-0.10663-0.058995-0.22818 0.048918-0.18196 0.16154l0.83163 2.0166h-0.32534c-0.13683 0-0.26815 0.054451-0.3649 0.15121-0.096771 0.096755-0.15121 0.22808-0.15121 0.3649v0.25805c0 0.13683 0.054436 0.26815 0.15121 0.3649 0.096755 0.096755 0.22808 0.15121 0.3649 0.15121h0.38306c-0.041895 1.6664-0.87348 2.3589-1.442 2.647-0.22041 0.10839-0.36038 0.33326-0.36038 0.57886v0.25805c0 0.13683 0.054436 0.26815 0.15121 0.3649 0.096755 0.096755 0.22808 0.15121 0.3649 0.15121h4.645c0.13683 0 0.26815-0.05445 0.3649-0.15121 0.096769-0.096755 0.15121-0.22808 0.15121-0.3649v-0.25805c0-0.24562-0.13997-0.47047-0.36038-0.57886-0.56853-0.28796-1.4001-0.98043-1.442-2.647h0.38306c0.13683 0 0.26815-0.054451 0.3649-0.15121 0.096769-0.096755 0.15121-0.22808 0.15121-0.3649v-0.25805c0-0.13683-0.054436-0.26815-0.15121-0.3649-0.096755-0.096755-0.22808-0.15121-0.3649-0.15121h-0.32534l0.83163-2.0166c0.046232-0.11262-0.075318-0.22053-0.18196-0.16154l-1.0484 0.58164-0.5824-1.0468c-0.023582-0.042471-0.069082-0.068094-0.11769-0.066278z",
    "rf": "m3.1936 1c-0.07126 7.1e-6 -0.12903 0.057772-0.12903 0.12903l0.25806 2.0645c7.1e-6 0.07126 0.057772 0.12903 0.12903 0.12903h0.38709v0.38709h-0.38709c-0.13684 0-0.26816 0.054452-0.36493 0.15121-0.096758 0.096758-0.15121 0.22808-0.15121 0.36493v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096767 0.22808 0.15121 0.36493 0.15121h0.5121c-0.041896 1.6665-0.8735 2.359-1.4421 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096767 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054445 0.36493-0.15121 0.096767-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56855-0.28797-1.4002-0.98048-1.4421-2.6469h0.5121c0.13684 0 0.26816-0.054445 0.36493-0.15121 0.096767-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.13684-0.054445-0.26816-0.15121-0.36493-0.096758-0.096758-0.22808-0.15121-0.36493-0.15121h-0.38709v-0.38709h0.38709c0.07126-7.1e-6 0.12903-0.057774 0.12903-0.12903l0.25806-2.0645c-7.7e-6 -0.07126-0.057774-0.12903-0.12903-0.12903h-0.7742c-0.07126 7.1e-6 -0.12903 0.057772-0.12903 0.12903v0.51614h-0.38709v-0.51614c-7.7e-6 -0.07126-0.057774-0.12903-0.12903-0.12903h-0.7742c-0.07126 7.1e-6 -0.12903 0.057772-0.12903 0.12903v0.51614h-0.38709v-0.51614c-7.1e-6 -0.07126-0.057772-0.12903-0.12903-0.12903z",
    "bs": "m5.0001 1c-0.1877 0-0.36115 0.10249-0.45168 0.26693-0.073493 0.13348-0.082103 0.29099-0.029491 0.43051-0.32433 0.33394-0.62307 0.67237-0.73978 1.0438-0.062168 0.19782-0.068176 0.40891 0.01109 0.61375 0.047115 0.12174 0.12614 0.23928 0.23164 0.35388h-0.44135c-0.13686 0-0.26821 0.05446-0.36497 0.15123-0.096788 0.096772-0.15123 0.22812-0.15123 0.36497v0.25811c0 0.13686 0.054446 0.26821 0.15123 0.36497 0.096772 0.096772 0.22812 0.15123 0.36497 0.15123h0.38312c-0.041903 1.6667-0.87363 2.3593-1.4423 2.6474-0.22044 0.10841-0.36044 0.33332-0.36044 0.57897v0.25811c0 0.13686 0.054446 0.26821 0.15123 0.36497 0.096772 0.096772 0.22812 0.15123 0.36497 0.15123h4.6458c0.13686 0 0.26821-0.05446 0.36497-0.15123 0.096788-0.096772 0.15123-0.22812 0.15123-0.36497v-0.25811c0-0.24566-0.13999-0.47056-0.36044-0.57897-0.56862-0.28801-1.4003-0.98062-1.4423-2.6474h0.38312c0.13686 0 0.26821-0.05446 0.36497-0.15123 0.096788-0.096772 0.15123-0.22812 0.15123-0.36497v-0.25811c0-0.13686-0.054446-0.26821-0.15123-0.36497-0.096772-0.096772-0.22812-0.15123-0.36497-0.15123h-0.44135c0.1055-0.1146 0.18452-0.23214 0.23164-0.35388 0.079272-0.20484 0.073264-0.41593 0.011085-0.61375-0.11671-0.37141-0.41543-0.70981-0.73978-1.0438 0.052618-0.13951 0.044008-0.29703-0.029485-0.43051-0.090534-0.16443-0.26397-0.26693-0.45168-0.26693zm0 0.25811c0.094077 0 0.18021 0.050926 0.22558 0.13334 0.043878 0.079697 0.041353 0.17543-0.00429 0.25357-0.037612 0.051445-0.032045 0.12264 0.01311 0.16762 0.3431 0.34963 0.64309 0.6967 0.74028 1.006 0.048591 0.15462 0.051468 0.29581-0.00555 0.4431-0.057 0.1473-0.17919 0.30522-0.40075 0.4711-0.099042 0.07426-0.046913 0.23185 0.076877 0.23239l0.77431 0.00177c0.068502 7e-7 0.13405 0.027175 0.18248 0.075617 0.048438 0.048438 0.075617 0.11398 0.075617 0.18248v0.25811c0 0.068502-0.027177 0.13405-0.075617 0.18248-0.048438 0.04844-0.11398 0.075617-0.18248 0.075617h-0.5162c-0.073314 0-0.13008 0.056296-0.12905 0.12905 0 0.041842-9.267e-4 0.088247 0 0.12905 0.043605 1.7576 0.95952 2.5598 1.5905 2.8789 0.13267 0.065242 0.21626 0.19948 0.21626 0.34733v0.25811c0 0.068502-0.027177 0.13405-0.075617 0.18248-0.048438 0.048438-0.11398 0.075615-0.18248 0.075615h-4.6458c-0.068504 0-0.13405-0.027177-0.18248-0.075615-0.04844-0.04844-0.075617-0.11399-0.075617-0.1825v-0.25811c0-0.14784 0.083595-0.28208 0.21626-0.34733 0.63093-0.31916 1.5469-1.1214 1.5905-2.8789 9.024e-4 -0.040804 0-0.087209 0-0.12905 0.00103-0.072754-0.055738-0.12905-0.12905-0.12905h-0.5162c-0.068502 0-0.13405-0.027175-0.18248-0.075615-0.04844-0.048438-0.075617-0.11398-0.075617-0.18248v-0.25811c0-0.068502 0.027177-0.13405 0.075617-0.18248 0.048438-0.04844 0.11398-0.075615 0.18248-0.075615h0.77431c0.12379-5.423e-4 0.17592-0.1599 0.076877-0.23416-0.22156-0.16588-0.34375-0.32378-0.40076-0.4711-0.057008-0.1473-0.054127-0.28849-0.0055493-0.4431 0.097185-0.30924 0.39718-0.6563 0.74028-1.006 0.045152-0.044973 0.05072-0.11617 0.01311-0.16762-0.04563-0.078138-0.04816-0.17387-0.00429-0.25357 0.045375-0.082411 0.13151-0.13334 0.22558-0.13334z",
    "ks": "m4.4839 1c-0.071485 0-0.12903 0.057549-0.12903 0.12903v0.64517h-0.64517c-0.071485 0-0.12903 0.057549-0.12903 0.12903v1.0323c0 0.071485 0.057549 0.12903 0.12903 0.12903h0.64517v0.64517h-0.7742c-0.13684 0-0.26816 0.054452-0.36493 0.15121-0.096769 0.096758-0.15121 0.22808-0.15121 0.36493v0.25806c0 0.13684 0.054443 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h0.38307c-0.041896 1.6665-0.8735 2.359-1.442 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054443 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096768-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56855-0.28797-1.4001-0.98048-1.442-2.6469h0.38307c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096768-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.13684-0.054443-0.26816-0.15121-0.36493-0.096758-0.096758-0.22808-0.15121-0.36493-0.15121h-0.7742v-0.64517h0.64517c0.071485 0 0.12903-0.057549 0.12903-0.12903v-1.0323c0-0.071485-0.057549-0.12903-0.12903-0.12903h-0.64517v-0.64517c0-0.071485-0.057549-0.12903-0.12903-0.12903zm0.12903 0.25806h0.7742v0.64517c0 0.071485 0.057549 0.12903 0.12903 0.12903h0.64517v0.7742h-0.64517c-0.017871 0-0.034957 0.00356-0.050402 0.010081-0.046345 0.019534-0.07863 0.065339-0.07863 0.11895v0.90323c0 0.071485 0.057549 0.12903 0.12903 0.12903h0.90323c0.068493 9e-7 0.13403 0.027172 0.18246 0.075606 0.048432 0.048432 0.075606 0.11397 0.075606 0.18246v0.25806c0 0.068493-0.027174 0.13403-0.075606 0.18246-0.04843 0.048434-0.11397 0.075606-0.18246 0.075606h-0.51614c-0.073304 0-0.13007 0.056288-0.12903 0.12903 0 0.041838-9.032e-4 0.088234 0 0.12903 0.043597 1.7573 0.95939 2.5593 1.5902 2.8786 0.13265 0.065236 0.21623 0.19945 0.21623 0.34728v0.25806c0 0.068493-0.027174 0.13403-0.075606 0.18246-0.048432 0.048434-0.11397 0.075606-0.18246 0.075606h-4.6451c-0.068493 0-0.13403-0.027172-0.18246-0.075606-0.048432-0.048432-0.075606-0.11397-0.075606-0.18246v-0.25806c0-0.14782 0.083582-0.28205 0.21623-0.34728 0.63086-0.31911 1.5466-1.1212 1.5902-2.8786 9.033e-4 -0.0408 0-0.087196 0-0.12903 0.00103-0.072745-0.055729-0.12903-0.12903-0.12903h-0.51614c-0.068493 0-0.13403-0.027172-0.18246-0.075606-0.048432-0.048431-0.075606-0.11397-0.075606-0.18246v-0.25806c0-0.068493 0.027174-0.13403 0.075606-0.18246 0.048432-0.048434 0.11397-0.075604 0.18246-0.075606h0.90323c0.071485 0 0.12903-0.057549 0.12903-0.12903v-0.90323c0-0.071485-0.058936-0.14305-0.12903-0.12903h-0.64517v-0.7742h0.64517c0.017871 0 0.034957-0.00356 0.050402-0.010081 0.046345-0.019536 0.07863-0.065339 0.07863-0.11895z",
    "ns": "m4.871 1c-0.071485 0-0.12903 0.050354-0.12903 0.1129v0.66708c-0.69979 0.058272-1.2771 0.58578-1.3957 1.2833l-0.88684 0.55242c-0.19641 0.12324-0.29814 0.35207-0.29814 0.61014 0 0.14402 0.041294 0.28949 0.11971 0.41356 0.21074 0.33344 0.64111 0.45404 0.9942 0.2815l0.29612-0.13937c0.078299-0.032432 0.16421-0.064611 0.2674-0.00503 0.080024 0.046203 0.12903 0.13114 0.12903 0.22355-0.041898 1.6665-0.87754 2.359-1.4461 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054434 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096775-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56854-0.28797-1.4001-0.98047-1.442-2.6469h0.38307c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096775-0.096758 0.15121-0.22808 0.15121-0.36493v-1.4194c-3e-7 -0.5475-0.2177-1.0725-0.60485-1.4597s-0.91219-0.60485-1.4597-0.60485zm0.12903 0.26437c0.43191 0.03094 0.84021 0.21446 1.1484 0.52268 0.33881 0.33881 0.52898 0.79833 0.52898 1.2775v1.4194c0 0.068493-0.027174 0.13403-0.075606 0.18246-0.048432 0.048434-0.11397 0.075606-0.18246 0.075606h-0.51614c-0.073304 0-0.13006 0.056287-0.12903 0.12903 0 0.041836-9.032e-4 0.088234 0 0.12903 0.043597 1.7573 0.95939 2.5593 1.5902 2.8786 0.13265 0.065236 0.21623 0.19945 0.21623 0.34728v0.25806c0 0.068493-0.027174 0.13403-0.075606 0.18246-0.048432 0.048434-0.11397 0.075606-0.18246 0.075606h-4.6451c-0.068493 0-0.13403-0.027172-0.18246-0.075606-0.048432-0.048432-0.075606-0.11397-0.075606-0.18246v-0.25806c0-0.14782 0.083582-0.28205 0.21623-0.34728 0.63085-0.31911 1.5466-1.1212 1.5902-2.8786 0-0.18418-0.098552-0.35499-0.25806-0.44708-0.079847-0.046021-0.16891-0.069052-0.25806-0.069052-0.083766 0-0.19306 0.03447-0.24874 0.064265l-0.2868 0.13533c-0.23864 0.12205-0.53169 0.044626-0.6749-0.18195-0.14314-0.22649-0.085396-0.55024 0.12198-0.68524l0.90978-0.56401c0.037673-0.022649 0.061227-0.062917 0.062501-0.10686 0.088449-0.63819 0.63174-1.1132 1.2775-1.1132 0.071485 0 0.12903-0.050356 0.12903-0.1129z",
    "ps": "m5 1c-0.72713-2.556e-5 -1.3575 0.5071-1.5126 1.2167-0.1226 0.56075 0.078288 1.1293 0.49371 1.4929h-0.5295c-0.13684 0-0.26816 0.054452-0.36493 0.15121-0.096758 0.096758-0.15121 0.22808-0.15121 0.36493v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h0.5121c-0.041896 1.6665-0.8735 2.359-1.442 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096758 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096758-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56855-0.28797-1.4001-0.98048-1.442-2.6469h0.5121c0.13684 0 0.26816-0.054452 0.36493-0.15121 0.096758-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.13684-0.054452-0.26816-0.15121-0.36493-0.096758-0.096758-0.22808-0.15121-0.36493-0.15121h-0.5295c0.41542-0.36365 0.61629-0.9322 0.49371-1.4929-0.15515-0.70964-0.78549-1.2168-1.5126-1.2167zm0 0.25781c0.60729-2.13e-5 1.131 0.42118 1.2606 1.0139 0.12958 0.59269-0.17078 1.1939-0.72279 1.4468-0.13935 0.059819-0.076042 0.24628 0.045112 0.24825l-2.519e-4 0.00101h0.96572c0.068493 9e-7 0.13403 0.027172 0.18246 0.075606 0.048432 0.048432 0.075606 0.11397 0.075606 0.18246v0.25806c0 0.068493-0.027172 0.13403-0.075606 0.18246-0.048432 0.048432-0.11397 0.075606-0.18246 0.075606h-0.64515c-0.072743-0.00114-0.13003 0.056288-0.12903 0.12903 0 0.041838-9.548e-4 0.088233 0 0.12903 0.043656 1.7574 0.95939 2.5594 1.5902 2.8786 0.13265 0.065236 0.21623 0.19945 0.21623 0.34728v0.25806c0 0.068493-0.027174 0.13403-0.075606 0.18246-0.048432 0.048432-0.11397 0.075606-0.18246 0.075606h-4.6451c-0.068493 0-0.13403-0.027172-0.18246-0.075606-0.048432-0.048434-0.075606-0.11397-0.075606-0.18247v-0.25806c0-0.14782 0.083582-0.28205 0.21623-0.34728 0.63086-0.31911 1.5466-1.1212 1.5902-2.8786 9.549e-4 -0.040801 0-0.087196 0-0.12903 9.935e-4 -0.072745-0.05629-0.13017-0.12903-0.12903h-0.64517c-0.068493 0-0.13403-0.027172-0.18246-0.075606-0.048432-0.048432-0.075606-0.11397-0.075606-0.18246v-0.25806c0-0.068493 0.027174-0.13403 0.075606-0.18246 0.048432-0.048434 0.11397-0.075604 0.18246-0.075606h0.96572l-2.518e-4 -0.00101c0.12115-0.0019624 0.18445-0.18841 0.045112-0.24824-0.552-0.25291-0.85237-0.85414-0.72279-1.4468 0.12958-0.59269 0.6533-1.0139 1.2606-1.0139z",
    "qs": "m4.9952 1.0001c-0.045179 0.00166-0.086195 0.026805-0.10811 0.066279l-0.5824 1.0469-1.0484-0.58165c-0.10664-0.058996-0.22819 0.048919-0.18195 0.16154l0.83165 2.0167h-0.32535c-0.13684 0-0.26816 0.054452-0.36491 0.15121-0.096771 0.096757-0.15121 0.22808-0.15121 0.36491v0.25806c0 0.13684 0.054438 0.26816 0.15121 0.36491 0.096757 0.096757 0.22808 0.15121 0.36491 0.15121h0.38307c-0.041896 1.6664-0.87348 2.359-1.442 2.6469-0.22041 0.10839-0.36037 0.33325-0.36037 0.57887v0.25806c0 0.13684 0.054438 0.26816 0.15121 0.36491 0.096757 0.096757 0.22808 0.15121 0.36491 0.15121h4.6451c0.13683 0 0.26816-0.054452 0.36491-0.15121 0.096771-0.096757 0.15121-0.22808 0.15121-0.36491v-0.25806c0-0.24562-0.13997-0.47048-0.36037-0.57887-0.56854-0.28796-1.4001-0.98045-1.442-2.6469h0.38307c0.13684 0 0.26816-0.054452 0.36491-0.15121 0.096771-0.096757 0.15121-0.22808 0.15121-0.36491v-0.25806c0-0.13684-0.054436-0.26816-0.15121-0.36491-0.096757-0.096757-0.22808-0.15121-0.36491-0.15121h-0.32535l0.83165-2.0167c0.046233-0.11262-0.07532-0.22054-0.18195-0.16154l-1.0484 0.58165-0.5824-1.0469c-0.023582-0.042472-0.069084-0.068095-0.11769-0.066279zm0.00478 0.39416 0.53226 0.95664c0.034581 0.062341 0.11329 0.084811 0.17565 0.05015l0.83895-0.46522-0.76284 1.8493c-0.03974 0.086141 0.024218 0.18418 0.1192 0.18271h0.51612c0.068492 8e-7 0.13403 0.027172 0.18246 0.075604 0.048432 0.048432 0.075604 0.11397 0.075604 0.18246v0.25806c0 0.068492-0.027172 0.13403-0.075604 0.18246-0.04843 0.048434-0.11397 0.075604-0.18246 0.075604h-0.51612c-0.073302 0-0.13006 0.056287-0.12903 0.12903 0 0.041836-9.034e-4 0.088232 0 0.12903 0.043597 1.7573 0.95937 2.5593 1.5902 2.8786 0.13265 0.065236 0.21623 0.19945 0.21623 0.34728v0.25806c0 0.068492-0.027172 0.13403-0.075604 0.18246-0.04843 0.048432-0.11397 0.075604-0.18246 0.075604h-4.6451c-0.068492 0-0.13403-0.027172-0.18246-0.075604-0.048432-0.048432-0.075604-0.11397-0.075604-0.18246v-0.25806c0-0.14782 0.083581-0.28205 0.21623-0.34728 0.63083-0.31911 1.5466-1.1212 1.5902-2.8786 9.032e-4 -0.040799 0-0.087194 0-0.12903 0.00103-0.072744-0.055729-0.12903-0.12903-0.12903h-0.51612c-0.068492 0-0.13403-0.027172-0.18246-0.075604-0.048432-0.04843-0.075604-0.11397-0.075604-0.18246v-0.25806c0-0.068492 0.027172-0.13403 0.075604-0.18246 0.04843-0.048434 0.11397-0.075604 0.18246-0.075604h0.51537c0.094984 0.00146 0.1597-0.096569 0.11996-0.18271l-0.76284-1.8493 0.83895 0.46522c0.062368 0.034661 0.14107 0.012189 0.17565-0.05015z",
    "rs": "m3.1936 1c-0.07126 7.1e-6 -0.12903 0.057772-0.12903 0.12903l0.25806 2.0645c7.1e-6 0.07126 0.057772 0.12903 0.12903 0.12903h0.38709v0.38709h-0.38709c-0.13684 0-0.26816 0.054452-0.36493 0.15121-0.096758 0.096758-0.15121 0.22808-0.15121 0.36493v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096767 0.22808 0.15121 0.36493 0.15121h0.5121c-0.041896 1.6665-0.8735 2.359-1.4421 2.6469-0.22041 0.1084-0.36039 0.33327-0.36039 0.57889v0.25806c0 0.13684 0.054452 0.26816 0.15121 0.36493 0.096758 0.096767 0.22808 0.15121 0.36493 0.15121h4.6451c0.13684 0 0.26816-0.054445 0.36493-0.15121 0.096767-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.24562-0.13998-0.47048-0.36039-0.57889-0.56855-0.28797-1.4002-0.98048-1.4421-2.6469h0.5121c0.13684 0 0.26816-0.054445 0.36493-0.15121 0.096767-0.096758 0.15121-0.22808 0.15121-0.36493v-0.25806c0-0.13684-0.054445-0.26816-0.15121-0.36493-0.096758-0.096758-0.22808-0.15121-0.36493-0.15121h-0.38709v-0.38709h0.38709c0.07126-7.1e-6 0.12903-0.057774 0.12903-0.12903l0.25806-2.0645c-7.7e-6 -0.07126-0.057774-0.12903-0.12903-0.12903h-0.7742c-0.07126 7.1e-6 -0.12903 0.057772-0.12903 0.12903v0.51614h-0.38709v-0.51614c-8.2e-6 -0.07126-0.057774-0.12903-0.12903-0.12903h-0.7742c-0.07126 7.1e-6 -0.12903 0.057772-0.12903 0.12903v0.51614h-0.38709v-0.51614c-7.1e-6 -0.07126-0.057772-0.12903-0.12903-0.12903zm0.12903 0.25806h0.51614v0.51614c7.1e-6 0.07126 0.057772 0.12903 0.12903 0.12903h0.64517c0.071264 0 0.12903-0.057771 0.12903-0.12903v-0.51614h0.51614v0.51614c0 0.071264 0.057771 0.12903 0.12903 0.12903h0.64517c0.07126-7.1e-6 0.12903-0.057772 0.12903-0.12903v-0.51614h0.51614l-0.25806 1.8064h-0.38709c-0.07126 7.1e-6 -0.12903 0.057772-0.12903 0.12903v0.64517c0 0.071264 0.057771 0.12903 0.12903 0.12903h0.51614c0.068493 7e-7 0.13403 0.027172 0.18246 0.075606 0.048432 0.048432 0.075606 0.11397 0.075606 0.18246v0.25806c0 0.068493-0.027174 0.13403-0.075606 0.18246-0.048432 0.048434-0.11397 0.075606-0.18246 0.075606h-0.64517c-0.072743-0.00114-0.13003 0.056288-0.12903 0.12903 0 0.041838-9.032e-4 0.088233 0 0.12903 0.043656 1.7574 0.95939 2.5594 1.5902 2.8786 0.13265 0.065236 0.21623 0.19945 0.21623 0.34728v0.25806c0 0.068493-0.027174 0.13403-0.075606 0.18246-0.048432 0.048432-0.11397 0.075606-0.18246 0.075606h-4.6451c-0.068493 0-0.13403-0.027174-0.18246-0.075606-0.048434-0.048432-0.075606-0.11397-0.075606-0.18246v-0.25806c0-0.14782 0.083582-0.28205 0.21623-0.34728 0.63086-0.31911 1.5466-1.1212 1.5902-2.8786 9.549e-4 -0.0408 0-0.087196 0-0.12903 9.936e-4 -0.072745-0.05629-0.13017-0.12903-0.12903h-0.64517c-0.068493 0-0.13403-0.027172-0.18246-0.075606-0.048434-0.048432-0.075606-0.11397-0.075606-0.18246v-0.25806c0-0.068493 0.027172-0.13403 0.075606-0.18246 0.048432-0.048434 0.11397-0.075604 0.18246-0.075606h0.51614c0.071264 0 0.12903-0.057771 0.12903-0.12903v-0.64517c-7.1e-6 -0.07126-0.057772-0.12903-0.12903-0.12903h-0.38709z",
}

exports.handler = async (event) => {
    let board = [];
    let body = "<svg version=\"1.1\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n";
    let colorPieceDark = event.queryStringParameters.dpc || "575452";
    let colorPieceLight = event.queryStringParameters.ltc || "f9f9f9";
    let colorStrokeDark = event.queryStringParameters.dsc || "000";
    let colorStrokelight = event.queryStringParameters.lsc || "000";
    let colorTileDark = event.queryStringParameters.dtc || "779556";
    let colorTileLight = event.queryStringParameters.ltc || "ebecd0";
    const fenDefault = "8/8/8/8/8/8/8/8 w - - 0 1";
    const fenRegRex = new RegExp("([rnbqkp1-8RNBQKP]{1,8})/([rnbqkp1-8RNBQKP]{1,8})/([rnbqkp1-8RNBQKP]{1,8})/([rnbqkp1-8RNBQKP]{1,8})/([rnbqkp1-8RNBQKP]{1,8})/([rnbqkp1-8RNBQKP]{1,8})/([rnbqkp1-8RNBQKP]{1,8})/([rnbqkp1-8RNBQKP]{1,8}) ([wb]) (K?Q?k?q?|-) ([a-h][1-8]|-) ([0-9]+) ([0-9]+)");
    const fenPieces = fenRegRex.exec((event.queryStringParameters.fen || fenDefault).trim()) || fenRegRex.exec(fenDefault);
    let whitesTurn = fenPieces[9] === "w";
    for (let row = 1; row < 9; row++) {
        let pieces = fenPieces[row];
        for (let number = 1; number < 9; number++)
            pieces = pieces.replace(new RegExp(`${number}`, "gu"), "        ".substr(0, number));
        board.push(pieces.split(""));
    }
    if (!whitesTurn) {
        for (let row = 0; row < 8; row++)
            board[row] = board[row].reverse();
        board = board.reverse();
    }
    for (let y = 0; y < 8; y++) {
        for (let x = 0; x < 8; x++) {
            body += `<rect x="${x * 10 + 10}" y="${y * 10 + 10}" width="10" height="10" fill="#${whitesTurn ? colorTileLight : colorTileDark}"/>\n`;
            if (board[y][x] !== " ") {
                body += `<path d="${pieces[board[y][x].toLowerCase() + 'f']}" transform="translate(${x * 10 + 10}, ${y * 10 + 10})" fill="#${board[y][x] === board[y][x].toUpperCase() ? colorPieceLight : colorPieceDark}"/>\n`;
                body += `<path d="${pieces[board[y][x].toLowerCase() + 's']}" transform="translate(${x * 10 + 10}, ${y * 10 + 10})" fill="#${board[y][x] === board[y][x].toUpperCase() ? colorStrokelight : colorStrokeDark}"/>\n`;
            }
            whitesTurn = !whitesTurn;
        }
        whitesTurn = !whitesTurn;
    }
    body += "</svg>";
    return {
        statusCode: 200,
        headers: {
            "content-type": "image/svg+xml"
        },
        body
    };
};